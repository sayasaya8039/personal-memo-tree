chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0});chrome.tabs.onActivated.addListener(async r=>{const e=await chrome.tabs.get(r.tabId);e.url&&chrome.runtime.sendMessage({type:"TAB_CHANGED",data:{url:e.url,title:e.title,favicon:e.favIconUrl}}).catch(()=>{})});chrome.tabs.onUpdated.addListener((r,e,t)=>{e.status==="complete"&&t.url&&chrome.runtime.sendMessage({type:"TAB_UPDATED",data:{url:t.url,title:t.title,favicon:t.favIconUrl}}).catch(()=>{})});chrome.runtime.onMessage.addListener((r,e,t)=>{if(r.type==="GET_CURRENT_TAB")return chrome.tabs.query({active:!0,currentWindow:!0}).then(a=>{a[0]&&t({url:a[0].url,title:a[0].title,favicon:a[0].favIconUrl})}),!0});
